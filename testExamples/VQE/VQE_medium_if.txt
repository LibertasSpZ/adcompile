	q1 := |0>;
	q2 := |0>;
	q3 := |0>;
	q4 := |0>;

	q5 := |0>;
	q6 := |0>;
	q7 := |0>;
	q8 := |0>;


	q9 := |0>;
	q10 := |0>;
	q11 := |0>;
	q12 := |0>;


	X(t1)[q1];
	X(t2)[q2];
	X(t3)[q3];
	X(t4)[q4];
	Z(t1)[q1];
	Z(t6)[q2];
	Z(t7)[q3];
	Z(t8)[q4];


	H()[q1];
	CNOT()[q1,q2];
	H()[q2];
	CNOT()[q2,q1];
	H()[q2];
	CNOT()[q2,q3];
	H()[q3];
	CNOT()[q3,q2];
	H()[q3];
	CNOT()[q3,q4];
	H()[q4];
	CNOT()[q4,q3];


	
	Z(t1)[q1];
	Z(t10)[q2];
	X(t1)[q1];
	X(t12)[q2];
	Z(t1)[q1];
	Z(t14)[q2];
	Z(t15)[q3];
	Z(t16)[q4];
	X(t17)[q3];
	X(t18)[q4];
	Z(t19)[q3];
	Z(t20)[q4];
	case M[q1] = 0 then
		X(t1)[q1];
		X(t62)[q2];
		X(t63)[q3];
		X(t64)[q4];
		Z(t1)[q1];
		Z(t66)[q2];
		Z(t67)[q3];
		Z(t68)[q4];


		H()[q1];
		CNOT()[q1,q2];
		H()[q2];
		CNOT()[q2,q1];
		H()[q2];
		CNOT()[q2,q3];
		H()[q3];
		CNOT()[q3,q2];
		H()[q3];
		CNOT()[q3,q4];
		H()[q4];
		CNOT()[q4,q3];


	
		Z(t1)[q1];
		Z(t70)[q2];
		X(t1)[q1];
		X(t72)[q2];
		Z(t1)[q1];
		Z(t74)[q2];
		Z(t75)[q3];
		Z(t76)[q4];
		X(t77)[q3];
		X(t78)[q4];
		Z(t79)[q3];
		Z(t80)[q4];
		case M[q2] = 0 then 
		
			X(t1)[q1];
			X(t82)[q2];
			X(t83)[q3];
			X(t84)[q4];
			Z(t1)[q1];
			Z(t86)[q2];
			Z(t87)[q3];
			Z(t88)[q4];


			H()[q1];
			CNOT()[q1,q2];
			H()[q2];
			CNOT()[q2,q1];
			H()[q2];
			CNOT()[q2,q3];
			H()[q3];
			CNOT()[q3,q2];
			H()[q3];
			CNOT()[q3,q4];
			H()[q4];
			CNOT()[q4,q3];


	
			Z(t1)[q1];
			Z(t90)[q2];
			X(t1)[q1];
			X(t92)[q2];
			Z(t1)[q1];
			Z(t94)[q2];
			Z(t95)[q3];
			Z(t96)[q4];
			X(t97)[q3];
			X(t98)[q4];
			Z(t99)[q3];
			Z(t100)[q4]
		else
			
			X(t21)[q5];
			X(t1)[q6];
			X(t23)[q7];
			X(t24)[q8];
			Z(t25)[q5];
			Z(t1)[q6];
			Z(t27)[q7];
			Z(t28)[q8];


			H()[q5];
			CNOT()[q5,q6];
			H()[q6];
			CNOT()[q6,q5];
			H()[q6];
			CNOT()[q6,q7];
			H()[q7];
			CNOT()[q7,q6];
			H()[q7];
			CNOT()[q7,q8];
			H()[q8];
			CNOT()[q8,q7];


	
			Z(t29)[q5];
			Z(t1)[q6];
			X(t31)[q5];
			X(t1)[q6];
			Z(t33)[q5];
			Z(t1)[q6];
			Z(t35)[q7];
			Z(t36)[q8];
			X(t37)[q7];
			X(t38)[q8];
			Z(t39)[q7];
			Z(t40)[q8]
		end
	else
		
		X(t21)[q5];
		X(t22)[q6];
		X(t1)[q7];
		X(t24)[q8];
		Z(t25)[q5];
		Z(t26)[q6];
		Z(t1)[q7];
		Z(t28)[q8];


		H()[q5];
		CNOT()[q5,q6];
		H()[q6];
		CNOT()[q6,q5];
		H()[q6];
		CNOT()[q6,q7];
		H()[q7];
		CNOT()[q7,q6];
		H()[q7];
		CNOT()[q7,q8];
		H()[q8];
		CNOT()[q8,q7];


	
		Z(t29)[q5];
		Z(t30)[q6];
		X(t31)[q5];
		X(t32)[q6];
		Z(t33)[q5];
		Z(t34)[q6];
		Z(t1)[q7];
		Z(t36)[q8];
		X(t1)[q7];
		X(t38)[q8];
		Z(t1)[q7];
		Z(t40)[q8];
		case M[q2] = 0 then
			X(t101)[q5];
			X(t102)[q6];
			X(t103)[q7];
			X(t1)[q8];
			Z(t105)[q5];
			Z(t106)[q6];
			Z(t107)[q7];
			Z(t1)[q8];


			H()[q5];
			CNOT()[q5,q6];
			H()[q6];
			CNOT()[q6,q5];
			H()[q6];
			CNOT()[q6,q7];
			H()[q7];
			CNOT()[q7,q6];
			H()[q7];
			CNOT()[q7,q8];
			H()[q8];
			CNOT()[q8,q7];


	
			Z(t109)[q5];
			Z(t110)[q6];
			X(t111)[q5];
			X(t112)[q6];
			Z(t113)[q5];
			Z(t114)[q6];
			Z(t115)[q7];
			Z(t1)[q8];
			X(t117)[q7];
			X(t1)[q8];
			Z(t119)[q7];
			Z(t1)[q8]
		else
			
			X(t1)[q9];
			X(t42)[q10];
			X(t43)[q11];
			X(t44)[q12];
			Z(t1)[q9];
			Z(t46)[q10];
			Z(t47)[q11];
			Z(t48)[q12];


			H()[q9];
			CNOT()[q9,q10];
			H()[q10];
			CNOT()[q10,q9];
			H()[q10];
			CNOT()[q10,q11];
			H()[q11];
			CNOT()[q11,q10];
			H()[q11];
			CNOT()[q11,q12];
			H()[q12];
			CNOT()[q12,q11];


	
			Z(t1)[q9];
			Z(t50)[q10];
			X(t1)[q9];
			X(t52)[q10];
			Z(t1)[q9];
			Z(t54)[q10];
			Z(t55)[q11];
			Z(t56)[q12];
			X(t57)[q11];
			X(t58)[q12];
			Z(t59)[q11];
			Z(t60)[q12]
		end
	end